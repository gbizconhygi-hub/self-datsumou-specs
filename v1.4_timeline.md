# 🧭 加盟店サポート自動化プロジェクト – マスターノート構成

---

## 📚 Ⅰ. ノートの目的

> 仕様書v1.4 Final を基に、開発～運用～保守までを
> 
> 
> **横軸＝運用・管理セクション（役割単位）**
> 
> **縦軸＝実装フェーズ（構築レイヤー順）**
> 
> で体系化し、「進捗管理 × 知識集約 × 機能マッピング」を同時に行うための**マスターノート構造**。
> 

---

## 🧩 Ⅱ. 横軸：運用・管理セクション（管理責任別）

| セクション | 管理主体 | 主な範囲 |
| --- | --- | --- |
| **1. 環境基盤管理** | システム管理者 | ドメイン／SSL／DB／PHP／メール／DNS認証 |
| **2. 通信連携管理** | 開発管理者 | ChatWork／Twilio／LINE／OpenAI／STORES／RemoteLock API |
| **3. AIチュートリアル運用** | 本部AI運用チーム | 顧客AIチャット（Web／LINE）／FAQ／回答チューニング |
| **4. 加盟店ポータル運用** | 加盟店サポートチーム | 顧客対応／申請／備品／請求確認／AI相談／MTG予約 |
| **5. 本部AI-INBOX運用** | 本部管理者 | tickets統合／承認／請求生成／AIパラメータ管理／FAQ管理 |
| **6. データ連携・KPI分析** | 経営企画／分析担当 | STORES売上／AIログ分析／KPIダッシュボード |
| **7. システム保守・監査** | 運用保守チーム | cron／バックアップ／監査ログ／アラート通知／セキュリティ |
| **8. AIコア・チューニング** | 本部AIエンジニア | AI分類・生成モデル・閾値・テンプレ管理／学習改善 |
| **9. 外部連携・インフラ統合** | 外部エンジニア／統括 | STORES予約／RemoteLock／電話代行メール解析／連携拡張 |

---

## ⚙️ Ⅲ. 縦軸：実装フェーズ（下層 → 上層）

| フェーズ | 開発目的 | 主な構築対象 | 対応セクション |
| --- | --- | --- | --- |
| **Phase 0：環境構築** | 稼働基盤の整備 | ドメイン／SSL／DB／PHP／メール | ① |
| **Phase 1：共通基盤構築** | コア構造を形成 | shared/config.php／DBスキーマ／.envスキーマ固定／AIコア雛形 | ①②⑤ |
| **Phase 2：通信・外部連携層** | 通知・API通信 | ChatWork／Twilio／LINE Messaging & Login／OpenAI／STORES API／RemoteLock API | ②⑨ |
| **Phase 3：AIチュートリアル層** | 顧客向け一次対応構築 | help.／line.／tutorial_api／ai_core連携 | ③⑧ |
| **Phase 4：加盟店ポータル層** | 加盟店業務の集約 | shop. UI／顧客対応／請求／申請／備品／AI相談／MTG予約 | ④⑤ |
| **Phase 5：本部AI-INBOX層** | 全チケット統合管理 | ai. UI／FAQ管理UI／AI設定管理UI／請求生成／売上分析 | ⑤⑧ |
| **Phase 6：データ連携／KPI層** | 収益・AI成果分析 | sales_records／tutorial_logs／shop_kpis／ダッシュボード | ⑥ |
| **Phase 7：自動処理層（cron）** | 自動化・監視 | 請求自動化／SMS追撃／オペレーター報告解析／バックアップ／監査 | ⑦⑨ |
| **Phase 8：保守・チューニング層** | 運用安定化 | AIパラメータ調整／FAQ更新／モデル更新 | ⑧⑦ |
| **Phase 9：拡張統合層** | 全体最適化 | STORES自動取込／RemoteLock制御／外部API強化 | ⑨ |

---

### 📋 Ⅳ. 要素別進行タスク一覧

| 要素ID | 要素チャット名 | フェーズ | 主担当 | 依存 | 内容概要 |
| --- | --- | --- | --- | --- | --- |
| **SYS_CORE** | 共通基盤構築 | Phase1 | 開発管理者 | - | shared/config.php・DB・env・AIコア雛形 |
| **API_COMM** | 通信API層 | Phase2 | 開発管理者 | SYS_CORE | ChatWork／Twilio／LINE／OpenAI／STORES／RemoteLock API疎通確認 |
| **AI_CORE** | AIコア設計 | Phase1〜2 | 本部AIエンジニア | SYS_CORE | ai_core.php／意図分類／生成／チューニングUI／CSV管理 |
| **HELP_UI** | 顧客チュートリアル（Web） | Phase3 | フロント開発者 | AI_CORE／API_COMM | help./tutorial_api／AI連携／FAQ表示 |
| **LINE_UI** | 顧客チュートリアル（LINE） | Phase3 | LINE開発者 | AI_CORE／API_COMM | webhook.php／Messaging API／LIFF／ログイン／本人認証 |
| **SHOP_PORTAL** | 加盟店ポータル | Phase4 | 開発管理者／サポートチーム | HELP_UI | 顧客対応／請求／申請／備品／AI相談／MTG予約 |
| **AI_INBOX** | 本部AI-INBOX | Phase5 | 本部管理者 | SHOP_PORTAL／AI_CORE | 全チケット統合／承認／FAQ／AI設定UI |
| **HQ_CHAT** | 本部AIチャット／AI相談 | Phase4 | サポートチーム | SHOP_PORTAL／AI_CORE | hq_chat_threads／AI一次回答→本部対応 |
| **HQ_MEETINGS** | 本部MTG予約 | Phase4 | 管理チーム | SHOP_PORTAL | hq_meeting_slots／hq_meetings／リマインド通知 |
| **SALES_LINK** | STORES売上取込・KPI | Phase6 | 分析担当 | AI_INBOX | sales_records／shop_kpis／分析UI |
| **LOCK_API** | RemoteLock連携 | Phase2〜6 | 外部連携担当 | API_COMM／AI_CORE | 解錠PIN照合／STORES予約照合／本人確認 |
| **OP_MAIL** | 電話代行メール解析 | Phase7 | 運用保守チーム | AI_CORE | IMAP取込→AI分類→要対応チケット化→ChatWork＋SMS |
| **CRON_SYS** | cron／自動処理 | Phase7 | 運用保守チーム | SYS_CORE／AI_INBOX | 請求／SMS追撃／バックアップ／リマインド |
| **KPI_ANALYTICS** | KPI分析 | Phase6 | 分析担当 | SALES_LINK／AI_CORE | AI応答率／顧客満足／売上分析 |
| **FAQ_MANAGE** | FAQ管理UI | Phase5 | 本部管理者 | AI_CORE | intents CRUD／CSV編集／FAQ更新 |
| **AI_TUNE** | AIチューニング | Phase8 | 本部AIエンジニア | AI_CORE／FAQ_MANAGE | パラメータ学習・モデル最適化 |
| **PACKAGE_BUILD** | パッケージ生成 | Phase9 | 開発管理者 | 全要素 | ZIP構成出力・selfcheck・smoke実行 |

---

## 📆 Ⅴ. 進行表（Notionガント構成想定）

| フェーズ | 実施順 | 主担当 | 依存 | 期間目安 | 成果物 |
| --- | --- | --- | --- | --- | --- |
| Phase 0 | 1 | システム管理者 | — | 完了済 | 環境動作基盤（SSL/DB/mail） |
| Phase 1 | 2 | 開発管理者 | 0 | 1週 | コア構造・DB・.env固定・AI雛形 |
| Phase 2 | 3 | 開発管理者／外部連携担当 | 1 | 2週 | 通信API・外部サービス連携確認 |
| Phase 3 | 4 | AI運用チーム | 2 | 2週 | help.／line. 顧客AIチュートリアル完成 |
| Phase 4 | 5 | 加盟店サポートチーム | 3 | 2週 | shop.ポータル／AI相談／MTG予約 |
| Phase 5 | 6 | 本部管理者 | 4 | 2週 | ai.INBOX／FAQ管理／AI設定UI |
| Phase 6 | 7 | 分析担当 | 5 | 1週 | KPIダッシュボード・sales連携 |
| Phase 7 | 8 | 運用保守チーム | 5 | 1週 | cron・バックアップ・監査／自動通知 |
| Phase 8 | 9 | AIエンジニア | 5 | 継続 | AIチューニング・学習更新 |
| Phase 9 | 10 | 統括エンジニア | 7 | 以降拡張 | STORES自動取込・RemoteLock制御統合 |

---
